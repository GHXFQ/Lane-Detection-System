(function(){"use strict";var e={2449:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cvswrap"},[t("div",{staticClass:"upload"},[t("el-upload",{staticClass:"upload-demo",attrs:{"on-success":e.reImage,drag:"",action:`http://${e.ServerIp}:${e.ServerPort}/api/upload`,multiple:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处")]),t("div",{staticStyle:{"font-size":"20px",margin:"15px 0"}},[e._v("或")]),t("button",{staticClass:"click-upload"},[e._v("点击上传")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png/mp4/zip文件")])])],1),t("div",{staticClass:"img"},[e.imgUrl?t("img",{staticClass:"img-a",attrs:{id:"video-player",src:e.downURL,alt:""}}):e._e(),t("div",{staticClass:"cover"},[t("button",{staticClass:"download",attrs:{id:"download-btn"},on:{click:e.downLoadURL}},[t("span",{staticClass:"download__text"},[e._v("Download")]),t("span",{staticClass:"download__icon"},[t("svg",{staticClass:"svg",attrs:{"data-name":"Layer 2",id:"bdd05811-e15d-428c-bb53-8661459f9307",viewBox:"0 0 35 35",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z"}}),t("path",{attrs:{d:"M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z"}}),t("path",{attrs:{d:"M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z"}})])])])])])])},r=[],i=n(7397),a={inheritProp:!0,mounted(){this.imgUrl=this.$route.query.imgUrl},data(){return{ServerIp:i.I,ServerPort:i.Z,isShow:!1,imgUrl:""}},methods:{async downloadImage(e){try{const t=await fetch(e),n=await t.blob(),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e.split("/").pop(),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href)}catch(t){console.error("下载图片失败",t)}},reImage(e,t,n){console.log("response",e),this.imgUrl=e.data.result_image,console.log("file",t),console.log("fileListresponse",n),this.isShow=!0},downLoadURL(){this.downloadImage(this.downURL)}},computed:{downURL(){return"http://"+this.ServerIp+":"+this.ServerPort+this.imgUrl}}},s=a,c=n(1001),l=(0,c.Z)(s,o,r,!1,null,"039aa6e6",null),u=l.exports},7787:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app"},[t("div",{staticClass:"responsive sticky-top bg-white",attrs:{id:"tabs"}},[t("div",{staticClass:"tabs tabs-center"},[t("a",{staticClass:"tab",class:{active:0==e.show},attrs:{href:"#"},on:{click:function(t){e.show=0}}},[e._v(" 上传文件 ")]),t("a",{staticClass:"tab",class:{active:1==e.show},attrs:{href:"#"},on:{click:function(t){e.show=1}}},[e._v(" 实时画面 ")])]),t("a",{staticClass:"gohome",attrs:{href:"#"},on:{click:e.goHome}},[e._v(" 首页 ")])]),t("div",{staticClass:"content"},[0==e.show?t("Upload"):e._e(),1==e.show?t("Show"):e._e()],1)])},r=[],i=(n(7658),function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-container"},[t("video",{ref:"video",staticClass:"video",attrs:{autoplay:""}}),t("button",{staticClass:"fullscreen-button",on:{click:e.toggleFullScreen}},[e._v(" 全屏模式 ")]),t("button",{staticClass:"recording-button",on:{click:e.toggleRecording}},[e._v(" "+e._s(e.recording?"停止录制":"开始录制")+" ")]),e.videoURL?t("a",{staticClass:"download-button",attrs:{href:e.videoURL,download:"recording.webm"}},[e._v("下载视频")]):e._e()])}),a=[],s={data(){return{mediaRecorder:null,chunks:[],recording:!1,videoURL:""}},mounted(){this.startCamera()},methods:{async startCamera(){try{const e=await navigator.mediaDevices.getUserMedia({video:!0}),t=this.$refs.video;t.srcObject=e}catch(e){console.error("Error accessing camera:",e)}},toggleFullScreen(){const e=this.$refs.video;e.requestFullscreen?e.fullscreenElement?document.exitFullscreen():e.requestFullscreen():e.mozRequestFullScreen?e.mozFullScreenElement?document.mozCancelFullScreen():e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitFullscreenElement?document.webkitExitFullscreen():e.webkitRequestFullscreen():e.msRequestFullscreen&&(e.msFullscreenElement?document.msExitFullscreen():e.msRequestFullscreen())},toggleRecording(){this.recording?this.stopRecording():this.startRecording(),this.recording=!this.recording},startRecording(){const e=this.$refs.video;this.chunks=[],this.mediaRecorder=new MediaRecorder(e.srcObject),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.chunks.push(e.data)},this.mediaRecorder.onstop=()=>{const e=new Blob(this.chunks,{type:"video/webm"});this.videoURL=URL.createObjectURL(e)},this.mediaRecorder.start()},stopRecording(){this.mediaRecorder.stop()}}},c=s,l=n(1001),u=(0,l.Z)(c,i,a,!1,null,"0e140ed5",null),d=u.exports,f=n(2449),m={methods:{isActive(e){return this.$store.state.activeTabIndex===e},$refs(e){return this.$refs[e]}},mounted(){},components:{Show:d,Upload:f["default"]},data(){return{show:0,Upload:0}},methods:{goHome(){this.$router.push("/")}}},h=m,p=(0,l.Z)(h,o,r,!1,null,"4fcd4cca",null),v=p.exports},7397:function(e,t,n){n.d(t,{I:function(){return o},Z:function(){return r}});const o="127.0.0.1",r="5001"},7010:function(e,t,n){var o=n(7195),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],a=n(1001),s={},c=(0,a.Z)(s,r,i,!1,null,null,null),l=c.exports,u=n(2241),d=(n(7787),n(6865),n(408));o["default"].use(d.ZP);var f=new d.ZP.Store({state:{isCollapse:!1,sideWide:180,avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},getters:{},mutations:{CHANGE(e){console.log("mutations中的change方法被调用了"),e.isCollapse=!e.isCollapse},CHANGESIDE(e,t){e.sideWide=t},CHANGEAVATAR(e,t){e.avatar=t},CLEAR(e){localStorage.clear("EmpPerm"),e.menuList=[]}},actions:{change(e){e.commit("CHANGE")},changeside(e,t){e.commit("CHANGESIDE",t)},changeavatar(e,t){e.commit("CHANGEAVATAR",t)},clear(e){e.commit("CLEAR")}}}),m=n(5114),h=n.n(m);n(2449);o["default"].use(u.ZP);const p=[{path:"/",name:"first",component:()=>n.e(336).then(n.bind(n,2336))},{path:"/main",name:"main",component:()=>Promise.resolve().then(n.bind(n,7787)),children:[{path:"Upload",name:"Upload",meta:{title:"上传文件"},component:()=>Promise.resolve().then(n.bind(n,2449))},{path:"HomeWatch",name:"HomeWatch",meta:{title:"实时画面"},component:()=>n.e(793).then(n.bind(n,2793))}]},{path:"/login",name:"login",component:()=>n.e(267).then(n.bind(n,9267))}],v=new u.ZP({routes:p});var g=v;o["default"].config.productionTip=!1,o["default"].use(h(),{size:"mini"}),new o["default"]({router:g,store:f,render:e=>e(l)}).$mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o](i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,o,r,i){if(!o){var a=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],i=e[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{267:"15ab273e",336:"bfed7d5c",793:"1ea8c5a9"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{267:"cdb9deee",336:"9d0b3d60",793:"924742a2"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-boot:";n.l=function(o,r,i,a){if(e[o])e[o].push(r);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=o),e[o]=[r];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(m);var r=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,o,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var a=function(n){if(i.onerror=i.onload=null,"load"===n.type)o();else{var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,i.parentNode&&i.parentNode.removeChild(i),r(c)}};return i.onerror=i.onload=a,i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],i=r.getAttribute("data-href");if(i===e||i===t)return r}},o=function(o){return new Promise((function(r,i){var a=n.miniCssF(o),s=n.p+a;if(t(a,s))return r();e(o,s,null,r,i)}))},r={143:0};n.f.miniCss=function(e,t){var n={267:1,336:1,793:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=i);var a=n.p+n.u(t),s=new Error,c=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}};n.l(a,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,a=o[0],s=o[1],c=o[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(c)var u=c(n)}for(t&&t(o);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkvue_boot"]=self["webpackChunkvue_boot"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7010)}));o=n.O(o)})();